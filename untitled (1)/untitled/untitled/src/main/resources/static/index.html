<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EV Master — Power Your Future</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Space+Grotesk:wght@300;400;500;600&display=swap" rel="stylesheet">

    <style>
        :root{
            --bg:#060b13;
            --cyan:#00d1ff;
            --green:#39ff14;
            --border:rgba(255,255,255,.12);
        }
        *{box-sizing:border-box}
        body{
            margin:0;
            background:radial-gradient(circle at top,#0b1220,#05080f 70%);
            color:#fff;
            font-family:'Space Grotesk',sans-serif;
            overflow:hidden;
        }
        canvas{position:fixed;inset:0;z-index:0}

        /* Layout */
        .main{
            position:relative;
            z-index:2;
            min-height:100vh;
            display:grid;
            grid-template-columns:1.3fr 1fr;
            align-items:center;
            padding:40px;
        }
        @media(max-width:900px){
            .main{grid-template-columns:1fr}
            .hero{display:none}
        }

        /* HERO */
        .hero h1{
            font-family:'Orbitron';
            font-size:64px;
            line-height:1.05;
        }
        .gradient{
            background:linear-gradient(90deg,var(--cyan),var(--green));
            -webkit-background-clip:text;
            -webkit-text-fill-color:transparent;
        }
        .hero p{color:#9fb4c7;margin-top:10px}

        /* GLASS */
        .glass{
            background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.02));
            border:1px solid var(--border);
            backdrop-filter:blur(20px);
            border-radius:28px;
        }

        /* AUTH CARD */
        .auth-card{
            width:420px;
            margin:auto;
            padding:26px;
        }

        /* Tabs */
        .tabs{
            display:flex;
            background:#0b1220;
            border-radius:999px;
            padding:6px;
            margin-bottom:20px;
        }
        .tabs button{
            flex:1;border:0;background:transparent;color:#8fb0c7;
            padding:10px;border-radius:999px;cursor:pointer
        }
        .tabs button.active{
            background:#fff;color:#000;font-weight:700
        }

        /* Inputs */
        .input{
            width:100%;
            padding:14px;
            border-radius:14px;
            background:#0b1220;
            border:1px solid #1f2b44;
            color:#fff;
            margin-bottom:14px;
        }

        /* Button */
        .btn-energy{
            background:linear-gradient(90deg,var(--cyan),var(--green));
            border:0;color:#000;font-weight:800;padding:14px;
            border-radius:14px;width:100%;cursor:pointer;font-size:16px;
        }

        /* Other */
        .switch{text-align:center;font-size:13px;color:#8fb0c7;cursor:pointer}
        .switch span{color:var(--cyan)}

        .message{text-align:center;font-size:14px;margin-bottom:10px}
        .message.error{color:#ff4d4d}
        .message.success{color:#39ff14}
        .message.info{color:#00d1ff}

        .d-none{display:none}
    </style>
</head>

<body>

<canvas id="bg"></canvas>

<div class="main">

    <!-- LEFT -->
    <div class="hero">
        <div style="display:flex;align-items:center;gap:10px;color:var(--cyan);font-weight:bold">
            EV MASTER
        </div>

        <h1>Power Your<br><span class="gradient">Future</span></h1>
        <p>Join the electric revolution.</p>
    </div>

    <!-- RIGHT -->
    <div class="glass auth-card">

        <div class="tabs">
            <button id="tabLogin" class="active" onclick="showForm('login')">Log In</button>
            <button id="tabSignup" onclick="showForm('signup')">Sign Up</button>
        </div>

        <!-- LOGIN -->
        <form id="login-form" method="post" action="/api/auth/login">
            <div class="message info">Sign in using your account</div>
            <input class="input" name="email" placeholder="you@example.com" required>
            <input class="input" type="password" name="password" placeholder="••••••••" required>

            <button class="btn-energy">Log In →</button>

            <div class="switch" style="margin-top:10px">
                Don’t have an account? <span onclick="showForm('signup')">Sign up</span>
            </div>
            <div class="switch" onclick="showForm('forgot')">Forgot password?</div>
        </form>

        <!-- SIGNUP -->
        <form id="signup-form" class="d-none">
            <div id="signup-message" class="message"></div>
            <input class="input" id="signup-email" placeholder="Email" required>
            <input class="input" id="signup-password" type="password" placeholder="Password" required>
            <input class="input" id="signup-nic" placeholder="NIC" required>
            <input class="input" id="signup-fullname" placeholder="Full Name" required>
            <input class="input" id="signup-phone" placeholder="Phone" required>

            <select class="input" id="signup-user-type">
                <option value="EV_OWNER">EV Owner</option>
                <option value="STATION_MANAGER">Station Manager</option>
            </select>

            <button class="btn-energy">Create Account</button>
            <div class="switch" onclick="showForm('login')">Back</div>
        </form>

        <!-- FORGOT -->
        <form id="forgot-form" class="d-none">
            <div id="forgot-message" class="message"></div>
            <input class="input" id="forgot-email" placeholder="Email" required>
            <button class="btn-energy">Send OTP</button>
            <div class="switch" onclick="showForm('login')">Back</div>
        </form>

        <!-- RESET -->
        <form id="reset-form" class="d-none">
            <div id="reset-message" class="message"></div>
            <input class="input" id="reset-new-password" type="password" placeholder="New Password" required>
            <input type="hidden" id="reset-email-holder">
            <button class="btn-energy">Reset Password</button>
            <div class="switch" onclick="showForm('login')">Back</div>
        </form>

    </div>
</div>

<script>
    function showForm(f){
        ["login","signup","forgot","reset"].forEach(x=>{
            document.getElementById(x+"-form").classList.add("d-none");
        });
        document.getElementById(f+"-form").classList.remove("d-none");
        document.getElementById("tabLogin").classList.toggle("active",f==="login");
        document.getElementById("tabSignup").classList.toggle("active",f==="signup");
    }

    // SIGNUP
    document.getElementById("signup-form").addEventListener("submit", function(e){
        e.preventDefault();
        fetch("/api/auth/signup",{
            method:"POST",
            headers:{"Content-Type":"application/json"},
            body:JSON.stringify({
                email:signup-email.value,
                password:signup-password.value,
                nic:signup-nic.value,
                fullName:signup-fullname.value,
                phoneNumber:signup-phone.value,
                userType:signup-user-type.value
            })
        }).then(r=>r.text()).then(t=>{alert(t);showForm("login");});
    });

    // FORGOT
    document.getElementById("forgot-form").addEventListener("submit", function(e){
        e.preventDefault();
        const email = forgot-email.value;
        document.getElementById("reset-email-holder").value = email;
        fetch("/api/auth/forgot-password",{
            method:"POST",
            headers:{"Content-Type":"application/json"},
            body:JSON.stringify({email:email})
        }).then(r=>r.text()).then(t=>{alert(t);showForm("reset");});
    });

    // RESET
    document.getElementById("reset-form").addEventListener("submit", function(e){
        e.preventDefault();
        fetch("/api/auth/reset-password",{
            method:"POST",
            headers:{"Content-Type":"application/json"},
            body:JSON.stringify({
                email:document.getElementById("reset-email-holder").value,
                newPassword:document.getElementById("reset-new-password").value
            })
        }).then(r=>r.text()).then(t=>{alert(t);showForm("login");});
    });
</script>

<script>
    /* PARTICLES */
    const c=document.getElementById("bg"),ctx=c.getContext("2d");
    function resize(){c.width=innerWidth;c.height=innerHeight}
    resize();onresize=resize;
    let p=Array.from({length:140},()=>({
        x:Math.random()*c.width,
        y:Math.random()*c.height,
        r:Math.random()*2+1,
        v:Math.random()*0.6+0.3,
        c:Math.random()>0.5?"0,209,255":"57,255,20"
    }));
    function draw(){
        ctx.clearRect(0,0,c.width,c.height);
        p.forEach(o=>{
            o.y-=o.v;
            if(o.y<0)o.y=c.height;
            ctx.beginPath();
            ctx.arc(o.x,o.y,o.r,0,Math.PI*2);
            ctx.fillStyle=`rgba(${o.c},0.8)`;
            ctx.shadowBlur=10;
            ctx.shadowColor=`rgba(${o.c},0.6)`;
            ctx.fill();
        });
        requestAnimationFrame(draw);
    }
    draw();
</script>

</body>
</html>
